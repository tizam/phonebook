(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),u=n.n(c),l=n(15),o=n(16),s=n(3),i=n(2),m=n.n(i),d=n(4),f=n.n(d),p="/api/persons",h={getAll:function(){var e,t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(f.a.get(p));case 2:return e=n.sent,n.next=5,m.a.awrap(e.data);case 5:return t=n.sent,n.abrupt("return",t);case 7:case"end":return n.stop()}}))},addPerson:function(e){var t,n;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(f.a.post(p,e));case 2:return t=a.sent,a.next=5,m.a.awrap(t.data);case 5:return n=a.sent,a.abrupt("return",n);case 7:case"end":return a.stop()}}))},removePerson:function(e){var t,n;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(f.a.delete("".concat(p,"/").concat(e)));case 2:return t=a.sent,a.next=5,m.a.awrap(t.data);case 5:return n=a.sent,a.abrupt("return",n);case 7:case"end":return a.stop()}}))},updatePerson:function(e,t){var n,a;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m.a.awrap(f.a.put("".concat(p,"/").concat(e),t));case 2:return n=r.sent,r.next=5,m.a.awrap(n.data);case 5:return a=r.sent,r.abrupt("return",a);case 7:case"end":return r.stop()}}))}},b=function(e){var t=e.filter,n=e.handleFilter;return r.a.createElement("p",null,"Filter shown with ",r.a.createElement("input",{type:"text",value:t,onChange:n}))},v=function(e){var t=e.person,n=e.handleDelete,a=t.name,c=t.number;return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,c),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(t)}},"delete")))},E=function(e){var t=e.handleSubmit,n=e.handleInputName,a=e.handleInputNumber,c=e.newName,u=e.newNumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("h2",null,"Add a person"),r.a.createElement("div",null,"Name: ",r.a.createElement("input",{type:"text",value:c,onChange:n})),r.a.createElement("div",null,"Number: ",r.a.createElement("input",{type:"text",value:u,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},w=function(e){var t=e.message,n=e.msgClass;return null===t?null:r.a.createElement("div",{className:n},t)};n(40);var g=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),i=Object(s.a)(u,2),m=i[0],d=i[1],f=Object(a.useState)(""),p=Object(s.a)(f,2),g=p[0],x=p[1],j=Object(a.useState)(""),O=Object(s.a)(j,2),N=O[0],y=O[1],S=Object(a.useState)(null),C=Object(s.a)(S,2),A=C[0],P=C[1],k=Object(a.useState)(""),I=Object(s.a)(k,2),D=I[0],F=I[1];Object(a.useEffect)((function(){h.getAll().then((function(e){return c(e)})).catch((function(e){return console.log(e)}))}),[]);var T=function(e){var t=n.filter((function(t){return t.id!==e.id}));window.confirm("delete  ".concat(e.name," ?"))&&(c(t),h.removePerson(e.id).catch((function(e){return console.log(e)})))};return r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"Phone Book App"),r.a.createElement(w,{message:A,msgClass:D}),r.a.createElement(b,{filter:m,handleFilter:function(e){d(e.target.value.toLowerCase())}}),r.a.createElement("hr",null),r.a.createElement(E,{handleSubmit:function(e){if(e.preventDefault(),""!==g){var t=n.find((function(e){return e.name===g}));if(t){if(window.confirm("".concat(t.name," is already added to the phonebook, replace the old number with the new one ?"))){var a=Object(o.a)({},t,{number:N});h.updatePerson(t.id,a).then((function(e){c(n.map((function(e){return e.id!==t.id?e:a}))),P("Updated ".concat(e.name)),F("success"),setTimeout((function(){P(null),F("")}),5e3),x(""),y("")})).catch((function(e){P("information of ".concat(t.name," has already been removed from the server")),F("error"),setTimeout((function(){P(null),F("")}),5e3)}))}}else{var r={name:g,number:N};h.addPerson(r).then((function(e){c([].concat(Object(l.a)(n),[e])),P("Added ".concat(e.name)),F("success"),setTimeout((function(){P(null),F("")}),5e3)})).catch((function(e){return console.log(e)})),x(""),y("")}}},handleInputName:function(e){x(e.target.value)},handleInputNumber:function(e){y(e.target.value)},newName:g,newNumber:N}),r.a.createElement("hr",null),r.a.createElement("table",{id:"people"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Number"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,n.filter((function(e){return e.name.toLowerCase().includes(m)})).map((function(e){return r.a.createElement(v,{person:e,key:e.id,handleDelete:T})})))))};u.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.6c589ec4.chunk.js.map